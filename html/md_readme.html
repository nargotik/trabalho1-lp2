<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Trabalho PrÃ¡tico LP2: Relatório Trabalho Prático LP1</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Trabalho PrÃ¡tico LP2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Relatório Trabalho Prático LP1 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A aplicação a ser desenvolvida no decorrer deste trabalho prático tem como finalidade a gestão de parques informáticos de uma ou várias entidades.</p>
<p>É a realização deste trabalho realizar uma abordagem de Aprendizagem de técnicas e métodos de Programação Orientada por Objectos, assim como a utilização de ferramentas e métodos de trabalho colaborativo.</p>
<p><b>Autores do Trabalho:</b></p><ul>
<li>___Daniel Torres (<a href="#" onclick="location.href='mai'+'lto:'+'a17'+'44'+'2@a'+'lu'+'nos'+'.i'+'pca'+'.p'+'t'; return false;">a1744<span style="display: none;">.nosp@m.</span>2@al<span style="display: none;">.nosp@m.</span>unos.<span style="display: none;">.nosp@m.</span>ipca<span style="display: none;">.nosp@m.</span>.pt</a>)___</li>
<li>___Oscar Silva (<a href="#" onclick="location.href='mai'+'lto:'+'a14'+'38'+'3@a'+'lu'+'nos'+'.i'+'pca'+'.p'+'t'; return false;">a1438<span style="display: none;">.nosp@m.</span>3@al<span style="display: none;">.nosp@m.</span>unos.<span style="display: none;">.nosp@m.</span>ipca<span style="display: none;">.nosp@m.</span>.pt</a>)___</li>
</ul>
<p><a href="https://www.codefactor.io/repository/github/nargotik/trabalho1-lp2"></a> <a href="https://travis-ci.com/nargotik/trabalho1-lp2"></a> </p><div style="page-break-after: always;"></div><h2>Introdução</h2>
<p>A escolha do tema a desenvolver no trabalho prende-se com a necessidade cada vez maior das empresas de desenvolverem metodologias para o controle do seu espólio material e virtual.</p>
<ul>
<li>A aplicação deverá:<ul>
<li>Ser abstracta o suficiente para a reutilização de código para outros sectores/aplicações.</li>
<li>Ter uma visão Macro e Micro de todo o inventário presente na Entidade.<ul>
<li>Listagem de equipamentos</li>
<li>Listagem por tipo de Equipamentos</li>
<li>Listagem por ano de fabrico</li>
<li>Listagem por fabricante</li>
<li>...</li>
</ul>
</li>
<li>Adição/Remoção/Edição de Items no Inventário</li>
</ul>
</li>
</ul>
<p>Foi pensado em criar um Interface de utilizador por Windows/Consola no entanto ainda será um grande desafio aprender WPF</p>
<p>Não tendo sido possível a aprendizagem de WPF e ao aprofundamento de outras técnicas à frente faladas o projecto <a class="el" href="namespace_u_i_1_1_win.html">UI.Win</a> apenas foi deixado como prova de conceito, assim como não foi muito desenvolvido o <a class="el" href="namespace_u_i_1_1_cli.html">UI.Cli</a>.</p>
<p>Foi primordialmente focado o desenvolvimento de capacidades de trabalho em grupo e automatizadas, assim como a funcionalidade de uma livraria (DLL) que poderá ser reutilizada em outros contextos.</p>
<p>No entanto todos os métodos e classes foram testados usando testes unitários que podem ser vistos no projecto de <a class="el" href="namespace_tests.html">Tests</a>.</p>
<p>Os resultados a obter com o desenvolvimento desta solução é criação de uma aplicação versátil e adaptativa às necessidades das diferentes entidades e deverá potencializar uma melhor organização do parque informáticos. </p><div style="page-break-after: always;"></div><h2>Método de Trabalho adoptado</h2>
<p>Para o desenvolvimento deste trabalho, utilizamos uma metodologia que permite a todos os membros do grupo desenvolvam simultaneamente a aplicação e que haja um controle de versões desenvolvidas através do Git.</p>
<p>Permite ainda dividir a carga de trabalho pois permite que cada elemento do grupo desenvolva uma classe específica da aplicação.</p>
<p>O GitHub em conjunto com outras ferramentas que serão abordadas mais à frente no tópico de Ferramentas/Serviços de Desenvolvimento trazem uma enorme mais valia à produção de Software.</p>
<p>Algumas ferramentas utilizadas:</p><ul>
<li>Travis-ci<ul>
<li>Travis CI é um serviço de integração contínua</li>
</ul>
</li>
<li>Codefector<ul>
<li>Analisador automático de syntax de código <div style="page-break-after: always;"></div></li>
</ul>
</li>
</ul>
<h2>Estrutura de Ficheiros</h2>
<ul>
<li>__./Libs/Folder/...__<ul>
<li>Pasta que contem exemplos de items, esta pasta irá gerar dll's a serem utilizadas pelo ITGestão</li>
</ul>
</li>
<li>__./ITGEstao/__<ul>
<li>Projecto (VS 2017) de um dll ITGestao.dll que pode ser reutilizada</li>
</ul>
</li>
<li>__./Tests/__<ul>
<li>Projecto de testes unitários</li>
</ul>
</li>
<li>__./UI.Cli/__<ul>
<li>Interface de Utilizador (Linha de Comandos)</li>
</ul>
</li>
<li>__./UI.Win/__<ul>
<li>Interface Utilizador (Windows)<ul>
<li>Apenas serve como prova de conceito da forma que foi dividido o <a class="el" href="namespace_u_i.html">UI</a> da parte Lógica</li>
</ul>
</li>
</ul>
</li>
<li>__./Utils/__<ul>
<li>Vários Utilitários a serem usados</li>
</ul>
</li>
<li><b>ITgestao.sln</b><ul>
<li>Solução (VS 2017)</li>
</ul>
</li>
<li><b>diagram.png</b><ul>
<li>Diagrama de classes do projecto ITGestao</li>
</ul>
</li>
<li><b>readme.md</b><ul>
<li>Relatório</li>
</ul>
</li>
<li>__.travis.yml__<ul>
<li>Ficheiro de compilação automática e Testes GIT</li>
</ul>
</li>
<li><b>LICENSE</b><ul>
<li>Licença de Utilização <div style="page-break-after: always;"></div></li>
</ul>
</li>
</ul>
<h2>Ferramentas / Serviços utilizados</h2>
<h3>Travis-CI</h3>
<p>Em resumo o <em>Travis-CI</em> é um serviço no qual nos é permitido correr uma instância de software (ex docker) de forma a que sejam feitos testes de compilação e testes unitários à solução.</p>
<p>Travis-CI (Continuous Improvement) é um serviço de melhoria continua de código e analise do mesmo.</p>
<p>Para a utilização deste serviço com C# tivemos de mudar a framework de testes de <a href="https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-with-mstest">MSTest</a> para a ferramenta <a href="https://nunit.org/">NUnit Framework - Unit Testing</a> pois a execução de testes em ambiente Linux/MacOsx é incompativel com a ferramenta MSTest.</p>
<p><b>Ficheiro de Configuração .travis.yml</b> </p><div class="fragment"><div class="line">language: csharp</div><div class="line">solution: ITgestao.sln</div><div class="line"></div><div class="line">install:</div><div class="line">  - sudo apt-get install nunit-console</div><div class="line">  - nuget restore ITgestao.sln</div><div class="line">  - nuget install NUnit.framework</div><div class="line">  - nuget install NUnit</div><div class="line">  - nuget install NUnit3TestAdapter</div><div class="line">  - nuget install NUnit.Runners -Version 3.7.0 -OutputDirectory testrunner</div><div class="line"></div><div class="line">script:</div><div class="line">  - rm -rf ./UI.Win</div><div class="line">  - xbuild /p:Configuration=Release ITgestao.sln</div><div class="line">  - mono ./testrunner/NUnit.ConsoleRunner.3.7.0/tools/nunit3-console.exe ./Tests/bin/Release/Tests.dll</div></div><!-- fragment --><p> A configuração do <em>Travis-CI</em> é feita através de um ficheiro que é deixado na raiz do projecto (**.travis.yml**) de forma a informar ao agent do <em>Travis-CI</em> quais as configurações necessárias para correr/testar a nossa solução.</p>
<p>O ficheiro de configuração do nosso trabalho utiliza Linux e mono para compilar e testar a aplicação, de notar que de momento não é possivel realizar testes em WPF de forma que o subprojecto WPF é removido do travis antes de iniciar a execução.</p>
<p>O <em>Travis-CI</em> é capaz de correr os mais variados ambientes quer de sistemas operativos quer de pacotes já feitos <a href="https://docs.travis-ci.com/user/multi-os/">MultiOS</a> / <a href="https://docs.travis-ci.com/user/docker/">Docker</a>.</p>
<h4>Funcionamento:</h4>
<p>O <em>Travis-CI</em> efectua testes de forma configurável pelo administrador do repositório.</p>
<p>Preferimos utilizar o <em>Travis-CI</em> para confirmar os pull requests para o branch master e para testar c compilação do branch master.</p>
<p>Desta forma sempre que for efectuado um pull request ao master do repositório o <em>Travis-CI</em> automaticamente inicia os testes como podem ver na imagem abaixo:</p>
<div class="image">
<img src="https://github.com/nargotik/trabalho1-lp2/blob/master/Doc/img/pull_request_testing.png?raw=true" alt="Pull Request Testing"/>
</div>
<p>Após a finalização dos testes é dado o "__ok__" para se efectuar o merge no repositório, cabe sempre a quem efectua a manutenção do repositório a decisão final se quer efectuar um merge que falhou à sua responsabilidade. </p><div class="image">
<img src="https://github.com/nargotik/trabalho1-lp2/blob/master/Doc/img/pull_request_testing_okmerge.png?raw=true" alt="Pull Request Testing"/>
</div>
<p>No dashboard do <em>Travis-CI</em> podemos ver o log assim como o tempo utilizado nos testes: </p><div class="image">
<img src="https://github.com/nargotik/trabalho1-lp2/blob/master/Doc/img/pull_request_test_ok.png?raw=true" alt="Pull Request Testing"/>
</div>
<p> Log dos testes: </p><div class="image">
<img src="https://github.com/nargotik/trabalho1-lp2/blob/master/Doc/img/pull_request_unit_summary_ok.png?raw=true" alt="Pull Request Testing"/>
</div>
<p>Log com exemplo de falhas nos testes. </p><div class="image">
<img src="https://github.com/nargotik/trabalho1-lp2/blob/master/Doc/img/pull_request_unit_summary_fail.png?raw=true" alt="Falha nos testes"/>
</div>
<p> O <em>Travis-CI</em> fornece ainda uma pequena imagem dinâmica que está presente na introdução do nosso trabalho que indica se o projecto está com os testes em "passing" ou "fail". </p><div style="page-break-after: always;"></div><h3>CodeFactor</h3>
<p>O CodeFactor é um serviço de analise de syntax de código de forma a que sejam cumpridas algumas regras básicas de realização de código.</p>
<p>Este serviço é importante, principalmente se quisermos manter um projecto com muitos programadores onde uniformizamos a forma como é colocado o código no projecto, garantindo assim desta forma homogeneidade dessas regras básicas de código.</p>
<p>Existem muitos outros serviços deste género, no entanto verificamos que este era de momento o que mais se enquadrava para a linguagem c#.</p>
<p>Este tipo de testes pode também ser efectuado de forma manual no Travis-CI, no entanto seria necessário fazer testes bem mais complexos que os unitários para testar problemas comuns de syntax.</p>
<div class="image">
<img src="https://github.com/nargotik/trabalho1-lp2/blob/master/Doc/img/codefacor1.png?raw=true" alt="Codefactor Print1"/>
</div>
<div class="image">
<img src="https://github.com/nargotik/trabalho1-lp2/blob/master/Doc/img/codefacor2.png?raw=true" alt="Codefactor Print2"/>
</div>
<div style="page-break-after: always;"></div><h2>Diagrama de Objectos</h2>
<div class="image">
<img src="https://github.com/nargotik/trabalho1-lp2/blob/master/diagram.png?raw=true" alt="Diagrama de Classes"/>
</div>
<div style="page-break-after: always;"></div><h2>Classes</h2>
<ul>
<li>Item<ul>
<li>ClasseName:Item (<em>Extensões de Item</em>)</li>
<li>Generico:Item</li>
<li>Rede:Item</li>
<li>Computador:Item</li>
<li>...</li>
</ul>
</li>
<li>Inventario</li>
<li>Localizacao</li>
<li>Localizacoes</li>
<li>Config</li>
<li>Exceptions</li>
<li>Menu</li>
<li>MenuOpcao <hr/>
</li>
</ul>
<h3>Item</h3>
<p>A classe Item é a classe abstracta que define e cria os objectos do tipo Item. É a classe "pai" responsável por armazenar e tratar um objecto do tipo Item o mais genérico possível. Esta classe têm dois métodos <b>static</b> muito importantes de forma a que qualquer filho possa informar a classe base que existe mais um tipo de child.</p>
<ol type="1">
<li>Atributos<ul>
<li>(<b><em>id</em></b>) - Valor único que identifica o item (id do item);</li>
<li>(<b><em>idCliente</em></b>) - Valor identifica o cliente ao qual pertence o item;</li>
<li>(<b><em>idLocalizacao</em></b>) - Valor que identifica a localização do item.</li>
</ul>
</li>
<li>Métodos<ul>
<li>(<b><em>AddAuthorizedType(object  _obj)</em></b>) - Permite adicionar um novo tipo de item autorizado;<ul>
<li>Este método utiliza a classe *__Config__* para armazenar na aplicação transversalmente o estado dos items autorizados.</li>
</ul>
</li>
<li><p class="startli">(<b><em>Type AuthorizedType(object  _obj)</em></b>) - Devolve o tipo do objecto colocado como parâmetro se for um objecto autorizado.</p><ul>
<li>Este método utiliza a classe *__Config__* para verificar se o objecto está na lista dos autorizados. <hr/>
 <h4>Extensões de Item (ClasseName:Item)</h4>
</li>
</ul>
<p class="startli">Todas as classes que estendam de Item devem informar a classe Item que existe um novo tipo de Item que será tratado pelo inventário.</p>
</li>
</ul>
</li>
</ol>
<p>Esta tipo de objectos deverão ser sealed de forma a que não hajam mais extensões do mesmo, a menos que para tal seja necessário extender.</p>
<div class="fragment"><div class="line">{c#}</div><div class="line">public ClasseName(...) : base(...)</div><div class="line">        {</div><div class="line">            Item.AddAuthorizedType(this);</div></div><!-- fragment --> <hr/>
 <h4>Genérico (Generico:Item)</h4>
<p>É um objecto que estenderá *__Item__*.</p>
<p>É a classe que trata da informação de um item genérico. </p><hr/>
 <h4>Computador (Computador:Item)</h4>
<p>É um objecto que estenderá *__Item__*.</p>
<p>Esta classe irá criar items do tipo Computador.</p>
<p>Ainda não está definido na altura do desenvolvimento deste relatório os atributos, deverão ser do tipo: RAM/CPU...</p>
<ol type="1">
<li><p class="startli"><b>Métodos/Construtores</b></p><ul>
<li>(<b><em>Computador(...)</em></b>) - Construtor que cria um objeto do tipo Computador. <hr/>
 <h4>Rede (Rede:Item)</h4>
</li>
</ul>
<p class="startli">É um objecto que extenderá *__Item__*.</p>
</li>
</ol>
<p>Esta classe irá criar items do tipo Rede.</p>
<p>Ainda não está definido na altura do desenvolvimento deste relatório os atributos, deverão ser do tipo: ENDEREÇO/TIPO(Switch/router)...</p>
<ol type="1">
<li><b>Métodos/Construtores</b><ul>
<li>(<b><em>Rede(...)</em></b>) - Construtor que cria um objeto do tipo Rede.</li>
</ul>
</li>
</ol>
<hr/>
<h3>Inventário</h3>
<p>O Objecto Inventário está encarregue de armazenar e tratar objectos do tipo <b><em>Item</em></b>.</p>
<p>Foi utilizada padrão singleton com múltiplas instancias pelo id da entidade de inventário. Para utilizar a class apenas é necessário: </p><div class="fragment"><div class="line">{c#}</div><div class="line">// Instancia com entidade = 0 por defeito</div><div class="line">Inventario.getInstance().metodo; </div><div class="line">...</div><div class="line">// Instancia com entidade = 10</div><div class="line">Inventario.getInstance(10).metodo;</div></div><!-- fragment --><p>De salientar que o armazenamento dos dados é feito automaticamente quando se adiciona/edita/remove um item com os métodos privados <b>SaveData()</b> e <b>LoadData()</b>.</p>
<p>O inventário foi desenvolvido de forma a poder ser reutilizado nas mais variadas áreas, sendo a abordagem feita o mais abstracta possível de forma a que o mesmo tanto armazene computadores como fruta ou viaturas.</p>
<ol type="1">
<li><b>Atributos</b><ul>
<li>(<b><em>entidade</em></b>) - Valor que identifica uma entidade da instancia do inventário;</li>
<li>(<b><em>itens</em></b>) - Lista de objectos do tipo Item;</li>
</ul>
</li>
<li><b>Métodos</b><ul>
<li><b><em>Adiciona(...)</em></b> - Método que adiciona um objecto ao inventário;</li>
<li><b><em>Remove(...)</em></b> - Método que elimina um objecto do inventário;</li>
<li><b><em>GetItemById(...)</em></b> - Método que devolve um objecto do inventário pelo ID</li>
<li><b><em>RemoveItemById(...)</em></b> - Método que remove um objecto do inventário pelo ID</li>
<li><b><em>RemoveAll(...)</em></b> - Método que remove todos os items do inventário</li>
<li><b><em>Edita(...)</em></b> - Método que edita um objecto do inventário</li>
</ul>
</li>
<li><p class="startli"><b>Testes Unitários</b></p><ul>
<li>Foram desenvolvidos vários testes unitários básicos unitários de forma a que qualquer modificação na classe <h2>obedeça às regras do desenvolvimento. </h2>
</li>
</ul>
<h3>Config</h3>
<p class="startli">O Objectivo desta classe é armazenar informação necessária para o runtime da aplicação de forma a que qualquer classe que necessite de informação sobre a aplicação posso consumir informação da mesma.</p>
</li>
</ol>
<p>Algumas das informações pensadas a colocar nesta classe futuramente.</p><ul>
<li>Directório Actual</li>
<li>Directório de Armazenamento dos ficheiros de dados persistentes.</li>
<li>Tipos de item autorizados pela aplicação ITGestao.dll a serem tratados pelo <b>Inventário</b></li>
</ul>
<p>Optou-se pela utilização do Padrão Singleton nesta classe de forma que só exista uma só instancia da classe config sendo que a mesma é inicializada na primeira vez que é chamada.</p>
<div class="fragment"><div class="line">{c#}</div><div class="line">public sealed class Config {</div><div class="line">    private Config()</div><div class="line">    {</div><div class="line">    // Código a correr na inicialização da classe</div><div class="line">    (...)</div><div class="line">    }</div><div class="line">    private static Config instance = null;</div><div class="line">    public static Config Instance</div><div class="line">    {</div><div class="line">        get</div><div class="line">        {</div><div class="line">            // A classe não está instanciada</div><div class="line">            if (instance == null)</div><div class="line">                instance = new Config();</div><div class="line">            // Se a classe está instanciada retorna a instancia.</div><div class="line">            return instance;</div><div class="line">        }</div><div class="line">    }</div><div class="line">(...)</div><div class="line">}</div></div><!-- fragment --><hr/>
 <h3>Exceptions</h3>
<p>Classe que permite lidar com erros que ocorrem durante a execução da aplicação.</p>
<p>Algumas das excepções já tratadas:</p><ul>
<li>ID duplicado;</li>
<li>ID inválido; <h2>- Tentativa de iniciação de objecto com argumentos em falta. </h2>
</li>
</ul>
<h3>Menu</h3>
<p>Foi criada uma classe de forma a podermos agilizar os menus no <a class="el" href="namespace_u_i_1_1_cli.html">UI.Cli</a></p>
<p>Para tal utilizamos também Delegates de forma a que uma opção de um Menu tivesse um acção (Action) atribuída (Callback).</p>
<h3>MenuOpcao</h3>
<p>É uma classe que armazena opções do menu e respectivos Actions</p>
<div style="page-break-after: always;"></div><h2>Bibliografia / Referências</h2>
<ul>
<li><a href="https://pt.wikipedia.org/wiki/Singleton">Padrão Singleton</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/test/unit-test-basics?view=vs-2019">Testes Unitários - Unit Testing</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/framework/wpf/">Windows Presentation Foundation</a></li>
<li><a href="https://www.codefactor.io/">CodeFactor</a></li>
<li><a href="https://travis-ci.org/">Travis-ci</a></li>
<li><a href="https://nunit.org/">NUnit Framework - Unit Testing</a></li>
<li><a href="https://github.com/">GitHub</a></li>
<li><a href="https://devhints.io/">DEVHINTS.IO</a></li>
<li><a href="https://hub.docker.com/">Docker Hub</a></li>
<li><a href="https://www.appveyor.com/">AppVeyor</a></li>
<li><a href="https://coveralls.io/">CoverAlls.IO</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
